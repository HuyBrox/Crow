extends ../../layout/default.pug
include ../../mixin/alert.pug
block style
    link(rel="stylesheet" href="./css/community.css")
block main
    +alert-success(5000)
    +alert-error(5000)
    .container(style = "margin-top : 80px ; ")
        //ƒêƒÉng b√†i vi·∫øt
        .block-create-post
            .user-avatar
                img(src="./img/Avata.png" alt="User Avatar")
                input.post-input(placeholder="B·∫°n ƒëang nghƒ© g√¨ th·∫ø?" readonly)
            .post-options
                .option
                    img(src=" /img/Live.png" alt="Video tr·ª±c ti·∫øp")
                    span Video tr·ª±c ti·∫øp
                .option
                    img(src="./img/TepAnh.png" alt="·∫¢nh/video")
                    span ·∫¢nh/video
                .option
                    img(src=" /img/M·∫∑tcuoi.png" alt="C·∫£m x√∫c/ho·∫°t ƒë·ªông")
                    span C·∫£m x√∫c/ho·∫°t ƒë·ªông

        // Duy·ªát qua t·∫•t c·∫£ b√†i vi·∫øt l·∫•y t·ª´ database
        each post in posts
            .post
                .post-header
                    - var postDate = post.createdAt ? new Date(post.createdAt).toLocaleDateString("vi-VN") : "Ng√†y kh√¥ng h·ª£p l·ªá";
                    span.date= postDate
                    span.separator ‚Ä¢
                    span.read-time 30 ph√∫t
                    a.category(href="") H·ªçc T·∫≠p

                .post-content
                    .left
                        h2= post.caption
                        p= post.desc
                        if post.img
                            .post-image
                                img(src=post.img, alt="H√¨nh ·∫£nh b√†i vi·∫øt")

                    .right
                        .user-profile
                            if post.author
                                img.avatar(src=post.author.avatar, alt="User Avatar")
                                span.username= post.author.username

                        .likes
                            button ‚ù§Ô∏è
                            span= (post.likes && post.likes.length) ? post.likes.length : 0
                            button üí¨
                            span= (post.comments && post.comments.length) ? post.comments.length : 0


                        .comments
                            if post.comments && post.comments.length
                                each comment in post.comments
                                    .comment
                                        .user-info
                                            if comment.author
                                                img.avatar(src=comment.author.avatar, alt="User Avatar")
                                                span.by by
                                                span.username= comment.author.username
                                                - var commentDate = comment.createdAt ? new Date(comment.createdAt).toLocaleDateString("vi-VN") : "Kh√¥ng x√°c ƒë·ªãnh";
                                                span.time / #{commentDate}
                                        p= comment.text
                                        button.reply Reply
                            else
                                p Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o. H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n b√¨nh lu·∫≠n!
